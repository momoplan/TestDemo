language: objective-c
osx_image: xcode7
before_install:
- gem install fir-cli --no-ri --no-rdoc
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/TestDemo.mobileprovision.enc
  -d -a -out scripts/profile/TestDemo.mobileprovision
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a
  -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a
  -out scripts/certs/dist.p12
- ./scripts/add-key.sh
script:
- xctool -workspace TestDemo.xcodeproj -scheme TestDemo -sdk iphoneos -configuration
  Release OBJROOT=$PWD/build SYMROOT=$PWD/build ONLY_ACTIVE_ARCH=NO TESTFLIGHT_APP_TOKEN=$TESTFLIGHT_APP_TOKEN
  HOCKEY_APP_ID=$HOCKEY_APP_ID
after_success:
- ./scripts/sign-and-upload.sh
after_script:
- ./scripts/remove-key.sh
env:
  global:
  - APP_NAME="TestDemo"
  - 'DEVELOPER_NAME="iPhone Distribution: bo zhong"'
  - PROFILE_NAME="TestDemo"
  - secure: MgpOWsVPLkf4eLpgie7FtNDprjj2s9TyRHl9CXz1MxgRr1QUGVXXjCvM1186sQqkq/GLMddY1YZxQN1gwZvHHOwiJHjDu0Hq8CwYhSl149uIMzKTD4vWpxRfiDv7+KMbiRLX0LpUQhJ0quWv3y7bm2lDN0ZqmLHQuik/igsnLGZz4d64V6OlPE+kDosmyIgt/OCMB/8Q+fb5JLD91C0zFMM0Q8O0VA1sjnDtJae3wrQX0+HegSm2sP7BMe6co/l8WXbAnKkQdx3YO/ZNL+TINvfmF4LK2bavJa+AGj5Vn15RiZbLckgTdffGVlWxNAMy2XMQ9qnS4aOTLOYZdmKxC9+v0fQ9uDq3kvCq9bNdNcPtCCmPWqhrEiUF8ev4fhZlJluqpY3K8/WvIXMOKjeXILMK2BQ6VESHWAcBNE2E3hP9Ztn8+SZ+uRDNzUUUpUwlOjfgbK1fwtwSMOHSL5LkiqEMlGDbpO5eXjzUSLPlnLoc6MGTYeGiY2N2HeJ3jFEs9potRLwW/1aisAApdgObgasYGRUwde7QzeNWUi7EFQOYObroVy5jrAMgcmv78FZnsHjc4ktDDyRwYiDBhMZu26D9VOglkdk7zosdAzZblZUoby0Xih6wt3sHz37PZAFIa0DQ1emf/TnZP1lqVq8So6Hz0gtlSA7jQAF4FPp+qsU=
