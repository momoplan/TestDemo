language: objective-c
osx_image: xcode7
before_install:
- gem install fir-cli --no-ri --no-rdoc
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/iOSTeam_Provisioning_Profile.mobileprovision.enc
  -d -a -out scripts/profile/iOSTeam_Provisioning_Profile.mobileprovision
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a
  -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a
  -out scripts/certs/dist.p12
- ./scripts/add-key.sh
script:
- xctool -project TestDemo.xcodeproj -scheme TestDemo -sdk iphoneos -configuration
  Release OBJROOT=$PWD/build SYMROOT=$PWD/build ONLY_ACTIVE_ARCH=NO 'CODE_SIGN_RESOURCE_RULES_PATH=$(SDKROOT)/ResourceRules.plist'
after_success:
- ./scripts/sign-and-upload.sh
after_script:
- ./scripts/remove-key.sh
env:
  global:
  - APP_NAME="TestDemo"
  - DEVELOPER_NAME="iPhone Developer:bo zhong (RUN444LG9H)"
  - PROFILE_NAME="iOSTeam_Provisioning_Profile"
  - secure: nA6/RlKPESUGP7cyXw/jUhFZrfK+3w2nm0KKFp1F8jJZpB5o5dqyVIYNiJ6pkvTRmDiCh9S93L7ppa2bjsG+X5Tol9stOJUcoszM1P1hWtgDrqiSNe6R8Z3p4ufw90j0dfeho+y0exxMJJP8eYYQp33QJmC+BXV8sCLZq3eAU1vTFE0toxBeceZzkxwQBuhcouNqfNEFFOm0xF7NcyWr+FQDyCOCRIn1OmtJdczRH5h6/xiT0k/rOoRKaw0Uf49YtkqgGIHmPTpDo0GtiKtpUrvzwxprc92H9x7KwNz0+7Pc3z5IJyn14JZGnRs7s7yQz+CYVKmCa1oOJKIjXrdUAY3cXctalG0zld9HqZPS2v0mPSfOdHn5p/8g7i9Yui0OHVcOPCMrRg31hKW9CplX5bt24MwfORdFCipCVXc8PrenxKavKI7JFxAHebnzcbyT1yTHHhgotbaQ3hzqlXHu1CK9fP4j7RrwEomhRqZYGxlHJUtONB47/dH7h8YNLJJzmZrUCULE/Iq1/SDiT5UDoAb75H/QPQxlZW1TB23PU6cmYrwPFSdHaCHUHDMkCHU06vmhZytBcbSragOMSFJN0bJq3eTCRqdCTgp1qEXLFtdb3gd+nQW8hLaaukMFLdu17TLhCbbQkfCm8XpJMNsVfPUKE8cbIsPMcwfEiFe47Do=
  - secure: AGaxVdAoVJzFcwZ3jTfQ9CiCWSmfcAXXKb+4e3B0ng975VCj5gTM9KLzcIJjzv2s9Fj1TiQgWzUJc0R9DVb8qhoCkUwem6qicCduemw9zryjpGpKuk61Rdv3BdcqavHJkSsKfZ1owu2kVoOIKNSzECWhoIpPnaV1eK4JnLHrQh0Nz91ug9Y93PDr6m0fxQmgAo9dhCillbUZdc4tuqni2M5Pz0HcCFcGLstDmq2d7IEv/THQ9GiQxyQ9+rYjY4gv0UUku9fnq6ulvLqg6ClQHraEGNUlQtHIizLKG0kzw4kBS8u0wk1z6/7i+DJNubCvBqP5V0T0Hv3VBOmdAE/NQGwLIihJGRjll1+5bIDdE0SwhUNVXLtJPx/plLiqwBXys+dTxL8+N46pzG8jVHWWJ1vveKMyjCO04xPGtWKLLcHbv03Ab1107PR1ofQkWYiIM5hKIppZDHd8JKqTei9+cOj+n1BW2URmHJwrPjidqvBjaGMgdvAqaQyBqiGMcTDA7Z1KR5IOEoR6qO1bzJfr0/BAO0hkCiifYr5K81Ja35qwXVblv4Kz3QV8g2/XJb5VMuA5jV3+Iicyqopld+Pf4l4d6nQgWQIJJRMt0hJpdpD9SQYqIayBP2R6kzRmyEZ3YZz01c1K4TdL6vDs9C9wgWokMokTqSy1K8ZfSqF+d/s=
